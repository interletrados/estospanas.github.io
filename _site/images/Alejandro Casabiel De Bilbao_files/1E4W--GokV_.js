if (self.CavalryLogger) { CavalryLogger.start_js(["ZNcCp"]); }

__d("ArtilleryLoggerType",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PRELIMINARY_UPLOAD:"preliminary",FULL_UPLOAD:"full_upload"};}),null);
__d('ArtillerySWDataCollector',['Promise','ClientServiceWorkerMessage','pageLoadedViaSWCache'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null,i={collect:function j(){return new (c('Promise'))(function(k,l){if(!c('pageLoadedViaSWCache')()){k();return;}var m=false,n=new (c('ClientServiceWorkerMessage'))('asw-pageTraceDataRequest',null,function(o){var p=o.data,q=p.command,r=p.data;if(m)return;m=true;if(q==='trace'&&r.traceData){h=r.traceData;k(r.traceData);return;}k(h);});n.sendViaController();});}};f.exports=i;}),null);
__d('ArtilleryLogger',['Arbiter','ArtilleryExperiments','ArtilleryLoggerType','ArtillerySWDataCollector','Banzai','BigPipe','BigPipeExperiments','ImageTimingHelper','Map','NavigationMetrics','NavigationTimingHelper','PageEvents','PageletEventsHelper','ResourceTimingBootloaderHelper','TimeSlice','TimeSliceHelper','forEachObject','pageLoadedViaSWCache','performance','performanceAbsoluteNow'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('BigPipeExperiments').link_images_to_pagelets,i=c('ArtilleryExperiments').artillery_static_resources_pagelet_attribution,j=c('ArtilleryExperiments').artillery_timeslice_compressed_data,k='__user_annotations',l='serviceworker_trace',m='artillery_logger_data',n=new (c('Map'))(),o=new (c('Map'))(),p=false,q=new (c('Map'))(),r=false,s=null,t=new (c('Map'))();function u(ka){if(!n.has(ka))n.set(ka,{});}function v(){c('Arbiter').subscribe(c('PageEvents').AJAXPIPE_ONUNLOAD,function(ka){if(ka.transition_type=='quickling')fa('quickling_transition').forEach(function(la){return c('Banzai').post(m,la,{retry:true});});return true;},c('Arbiter').SUBSCRIBE_NEW);}function w(ka){ka.subscribe(c('BigPipe').Events.tti,function(la,ma){var na=ma.ts,oa=ma.lid,pa=ma.metrics;u(oa);var qa=n.get(oa);qa.t_bigpipe_tti=na;c('forEachObject')(pa,function(ra,sa){qa[sa]=ra;});});}function x(ka){ka.subscribe(c('BigPipe').Events.displayed,function(la,ma){var na=ma.ts,oa=ma.lid;u(oa);n.get(oa).t_marker_all_pagelets_displayed=na;c('TimeSlice').disableHeartbeat();c('ArtillerySWDataCollector').collect().done(function(pa){if(pa)t.set(oa,pa);});});}function y(ka){ka.subscribe(c('BigPipe').Events.loaded,function(la,ma){var na=ma.ts,oa=ma.lid;u(oa);n.get(oa).t_marker_bigpipe_e2e=na;});}function z(ka,la,ma){var na=ma;if(!o.has(na)||!n.has(na))return null;var oa=n.get(na);oa.uploadType=c('ArtilleryLoggerType').FULL_UPLOAD;ga(oa);aa();if(ka==='normal'){oa.navigation_timing=c('NavigationTimingHelper').getNavTimings();oa.resource_timing_bootloader=c('ResourceTimingBootloaderHelper').getMetrics(0,na,h);oa.time_slice=c('TimeSliceHelper').getMetrics(c('performance').timing.navigationStart,oa.t_onload,1,1);}else if(ka==='quickling'&&c('performance').getEntriesByName){var pa=c('performance').getEntriesByName(la);if(pa.length){var qa=pa[0].startTime;oa.navigation_timing=c('NavigationTimingHelper').getAsyncRequestTimings(la);oa.resource_timing_bootloader=c('ResourceTimingBootloaderHelper').getMetrics(qa,na,h);oa.time_slice=c('TimeSliceHelper').getMetrics(c('performance').timing.navigationStart+qa,oa.t_onload,1,1);}}if(j)oa.time_slice=c('TimeSliceHelper').formatMetricsForTransport(oa.time_slice);oa.pagelet_events=c('PageletEventsHelper').getMetrics(na);if(!i&&oa.pagelet_events){if(oa.pagelet_events.display_resources)delete oa.pagelet_events.display_resources;if(oa.pagelet_events.all_resources)delete oa.pagelet_events.all_resources;}ia(na);ha(oa);var ra=babelHelpers['extends']({},oa,o.get(na).data);if(ka==='normal'&&t.has(na))ra[l]=t.get(na);if(q.size){ra[k]={};q.forEach(function(sa,ta){ra[k][ta]=sa;});}o['delete'](na);n['delete'](na);c('Banzai').post(m,ra,c('Banzai').VITAL);}function aa(){ja.recordUserAnnotation('client_pixel_ratio_10x',((window.devicePixelRatio||1)*10).toString());ja.recordUserAnnotation('is_sw_page_loaded_via_cache',c('pageLoadedViaSWCache')()?'1':'0');if(c('performance')&&c('performance').navigation)ja.recordUserAnnotation('nav_type',ba(c('performance').navigation.type));}function ba(ka){switch(ka){case 0:return 'TYPE_NAVIGATE';case 1:return 'TYPE_RELOAD';case 2:return 'TYPE_BACK_FORWARD';case 255:return 'TYPE_RESERVED';default:return 'unknown navigation type';}}function ca(ka,la,ma){var na=n.get(la);if(!r||ka!=='normal'||!na||na.prelim_sent)return;var oa=da(la);if(oa)c('Banzai').post(m,oa,{signal:true,retry:true});na.prelim_sent=true;}function da(ka,la){var ma=ka,na=n.get(ma),oa=o.get(ma);if(na==undefined||oa==undefined)return null;var pa=c('NavigationTimingHelper').getNavTimings();if(pa==null)return null;var qa={};qa.uploadType=c('ArtilleryLoggerType').PRELIMINARY_UPLOAD;qa.navigationStart=pa.navigationStart;qa.fetchStart=pa.fetchStart;qa.t_marker_all_pagelets_displayed=na.t_marker_all_pagelets_displayed;if(window.CavalryLogger){var ra=window.CavalryLogger.getInstance();if(ra.values){qa.t_tti=ra.values.t_tti;qa.t_onload=ra.values.t_onload;}}if(la!=null){qa.earlyConstructionReason=la;qa.earlyConstructionTime=c('performanceAbsoluteNow')();qa.artillerySetupTime=s;}qa.trace_id=oa.traceID;return qa;}function ea(){c('NavigationMetrics').addListener(c('NavigationMetrics').Events.NAVIGATION_DONE,function(ka,la){var ma=la.pageType,na=la.pageURI,oa=la.serverLID;ca(ma,oa);z(ma,na,oa);});}function fa(ka){var la=[];n.forEach(function(ma,na){if(ma!=null&&!ma.prelim_sent){var oa=da(na,ka);if(oa){la.push(oa);ma.prelim_sent=true;}}});n=new (c('Map'))();return la;}function ga(ka){var la;if(window.CavalryLogger)(function(){var ma=window.CavalryLogger.getInstance(),na=['t_domcontent','t_pagelet_cssload_early_resources','t_tti','t_onload'];na.forEach(function(oa){if(ma.values.hasOwnProperty(oa))ka[oa]=ma.values[oa];});})();}function ha(ka){if(window.CavalryLogger){var la=window.CavalryLogger.getInstance();c('ResourceTimingBootloaderHelper').addBootloaderMetricsToResourceTimings(ka.resource_timing_bootloader,la.bootloader_metrics,true);}}function ia(ka){var la=n.get(ka),ma=c('performance').timing.navigationStart,na=la.t_bigpipe_tti,oa=la.t_marker_bigpipe_e2e,pa=c('ImageTimingHelper').getImageTimings(ka),qa=c('ResourceTimingBootloaderHelper').getLastTTIAndE2EImageResponseEnds(na,oa,pa),ra=qa.TTI,sa=qa.E2E;if(!isNaN(ra)&&ra!==ma)la.t_tti_with_images=ra;if(!isNaN(sa)&&sa!==ma)la.t_marker_bigpipe_e2e_with_images=sa;}var ja={enablePreliminaryReporting:function ka(){r=true;},enableProfilingWithClientData:function ka(la,ma,na){u(la);if(na.early_sendback_time_ms)setTimeout(function(){return ca('normal',la,na.early_sendback_time_ms);},na.early_sendback_time_ms);o.set(la,{traceID:ma,data:na});if(p)return;p=true;s=c('performanceAbsoluteNow')();c('PageletEventsHelper').init();c('Arbiter').subscribe(c('BigPipe').Events.init,function(oa,pa){var qa=pa.arbiter;if(qa){w(qa);x(qa);y(qa);}});v();ea();if(c('Banzai').canUseNavigatorBeacon())c('Banzai').registerToSendWithBeacon(m,function(){return fa('unload_navigator_beacon');});},recordUserAnnotation:function ka(la,ma){var na=arguments.length<=2||arguments[2]===undefined?true:arguments[2];if(!na&&q.has(la))return false;q.set(la,ma);return true;}};f.exports=ja;}),null);
__d('ReactBlueBarPerfLogger',['regeneratorRuntime','Arbiter','ArtillerySWDataCollector','BanzaiScuba','BanzaiServiceWorker','BigPipe','LogBuffer','NavigationMetrics','PageletEventConstsJS','SubscriptionsHandler','ClientChromeExperimentsData','pageLoadedViaSWCache','performance'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='reactbluebar_perf',i='navigationStart',j='fetchStart',k='domainLookupStart',l='connectStart',m='connectEnd',n='responseStart',o='responseEnd',p='domLoading',q='domInteractive',r='domContentLoadedEventEnd',s='domComplete',t='unloadEventStart',u='unloadEventEnd',v={},w=function y(z){var aa,ba=this,ca,da;return c('regeneratorRuntime').async(function ea(fa){while(1)switch(fa.prev=fa.next){case 0:ca=new (c('BanzaiScuba'))(h,null,{addBrowserFields:true,addGeoFields:true,addPredictedGeographyFields:true,addRequestFields:true});ca.addNormal('page_client',z.page);ca.addNormal('response_type',c('pageLoadedViaSWCache')()?'sw':'server');ca.addNormal('second_load',z.isSecondLoad);ca.addNormal('temp_logger_type',c('BanzaiServiceWorker').isEnabled()?'background_sync':'normal');da={};if(c('ClientChromeExperimentsData').shouldShowClientChrome)da.client_chrome=1;ca.addTagset('gk_on',da);if(!c('performance').timing){fa.next=11;break;}fa.next=11;return c('regeneratorRuntime').awrap(function ga(){var ha,ia,ja,ka,la,ma,na,oa;return c('regeneratorRuntime').async(function pa(qa){while(1)switch(qa.prev=qa.next){case 0:ha=c('performance').timing;ia=ha.navigationStart;ja=ha.fetchStart;ca.addInteger('tti',z.tti-ja);ca.addInteger('e2e',z.e2e-ja);ca.addInteger('display_done',z.displayDone-ja);ca.addInteger('rbb_display_done',z.rbbDisplayDone-ja);if(z.bodyVisible)ca.addInteger('body_visible',z.bodyVisible-ja);if(typeof b._cstart==='number')ca.addInteger('cstart',b._cstart-ja);qa.next=11;return c('regeneratorRuntime').awrap(c('ArtillerySWDataCollector').collect());case 11:ka=qa.sent;if(!ka){qa.next=25;break;}la=ka.segments.filter(function(ra){return ra.description==='cached_header_response'||ra.description==='navigation_response';});ma=0;case 15:if(!(ma<la.length)){qa.next=25;break;}na=la[ma].begin;oa=la[ma].end;if(!(!na||!oa)){qa.next=20;break;}return qa.abrupt('continue',22);case 20:ca.addInteger(la[ma].description+'.begin',na-ia);ca.addInteger(la[ma].description+'.end',oa-ia);case 22:ma++;qa.next=15;break;case 25:ca.addInteger('tti_navs',z.tti-ia);ca.addInteger('e2e_navs',z.e2e-ia);ca.addInteger('display_done_navs',z.displayDone-ia);ca.addInteger('rbb_display_done_navs',z.rbbDisplayDone-ia);if(z.bodyVisible)ca.addInteger('body_visible_navs',z.bodyVisible-ia);if(typeof b._cstart==='number')ca.addInteger('cstart_navs',b._cstart-ia);Object.keys(v).forEach(function(ra){ca.addInteger('pagelet_arrive_'+ra,v[ra]-ja);ca.addInteger('pagelet_arrive_'+ra+'_navs',v[ra]-ia);});[{name:'redirect',start:i,end:j},{name:'app_cache',start:j,end:k},{name:'dns',start:k,end:l},{name:'tcp',start:l,end:m},{name:'request',start:m,end:n},{name:'respond',start:n,end:o},{name:'dom_setup',start:n,end:p},{name:'dom_interactive_load',start:p,end:q},{name:'dom_content_load',start:q,end:r},{name:'dom_complete',start:r,end:s},{name:'unload',start:t,end:u}].forEach(function(ra){var sa=ra.name,ta=ra.start,ua=ra.end,va=c('performance').timing[ta]||0,wa=c('performance').timing[ua]||0;if(wa>=va)ca.addInteger('perf_timing_'+sa,wa-va);});case 33:case 'end':return qa.stop();}},null,ba);}());case 11:ca.post();case 12:case 'end':return fa.stop();}},null,this);},x={init:function y(z){var aa=z.samplingRateServer,ba=z.samplingRateSW,ca=z.isSecondLoad,da=null,ea=new (c('SubscriptionsHandler'))();ea.addSubscriptions(c('Arbiter').subscribe('sw/bodyVisible',function(fa,ga){var ha=ga.relativeTime;if(c('performance').timing)da=ha+c('performance').timing.navigationStart;}));ea.addSubscriptions(c('Arbiter').subscribe(c('BigPipe').Events.init,function(fa,ga){var ha=ga.arbiter,ia=ha.subscribe('pagelet_event',function(ja,ka){var event=ka.event,la=ka.id,ma=ka.ts;if(event!==c('PageletEventConstsJS').ARRIVE_START||typeof ma!=='number')return;var na=['first_response','last_response','pagelet_welcome_box','pagelet_dock','pagelet_navigation','pagelet_composer','substream_0','substream_1','pagelet_ego_pane','webgraphql_preloader_ReactBlueBarJewelsDataPreloader',{regex:/^topnews_main_stream_(\d+)$/,name:'topnews_main_stream'},{regex:/^hyperfeed_story_id_(\d+)$/,name:'hyperfeed_story'}],oa=null;for(var pa=na,qa=Array.isArray(pa),ra=0,pa=qa?pa:pa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var sa;if(qa){if(ra>=pa.length)break;sa=pa[ra++];}else{ra=pa.next();if(ra.done)break;sa=ra.value;}var ta=sa;if(typeof ta==='string'){if(ta===la){oa=ta;break;}}else if(ta.regex.test(la)){oa=ta.name;break;}}if(oa&&!v[oa])v[oa]=ma;});ea.addSubscriptions(ia);}));ea.addSubscriptions(c('NavigationMetrics').addRetroactiveListener(c('NavigationMetrics').Events.NAVIGATION_DONE,function(fa,ga){var ha=ga.page,ia=ga.pageType,ja=ga.tti,ka=ga.e2e,la=ga.all_pagelets_displayed;ia=ia||'normal';if(ia!=='normal')return;ea.release();var ma=c('pageLoadedViaSWCache')()?ba:aa;if(Math.random()>ma)return;c('LogBuffer').tail('reactbluebar_perf',function(na){var oa=na.displayDone;w({bodyVisible:da,rbbDisplayDone:oa,displayDone:la,e2e:ka,page:ha,pageType:ia,tti:ja,isSecondLoad:ca});});}));}};f.exports=x;}),null);
__d('ServiceWorkerURLCleaner',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=/sw_fnr_id=\d+&?/,i={removeRedirectID:function j(){if(location.search&&h.test(location.search))if(history!==undefined&&typeof history.replaceState==='function'){var k=location.toString().replace(h,'').replace(/\?$/,'');history.replaceState({},document.title,k);}}};f.exports=i;}),null);